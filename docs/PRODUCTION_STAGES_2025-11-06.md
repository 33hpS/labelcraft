# –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ç–∞–ø–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (Production Stage Tracking)

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ç–∞–ø–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –º–µ–±–µ–ª–∏ —Å QR-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

**–î–∞—Ç–∞:** 6 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v2.3

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

**–î–≤–æ–π–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ:**

1. **–ü–µ—Ä–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∑–∞–∫–∞–∑–∞ ‚Üí —ç—Ç–∞–ø **–ù–ê–ß–ê–¢**
2. **–í—Ç–æ—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–Ω–æ–≤–∞ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç ‚Üí —ç—Ç–∞–ø **–ó–ê–í–ï–†–®–Å–ù**

**–ü—Ä–∏–º–µ—Ä:**
```
–û–ø–µ—Ä–∞—Ç–æ—Ä –Ω–∞ —ç—Ç–∞–ø–µ "–†–∞—Å–∫—Ä–æ–π":
1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∑–∞–∫–∞–∑–∞ ‚Üí "–†–∞—Å–∫—Ä–æ–π –Ω–∞—á–∞—Ç"
   - –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞
   - –°—Ç–∞—Ç—É—Å: "started"
   
2. –ó–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É, —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Å–Ω–æ–≤–∞ ‚Üí "–†–∞—Å–∫—Ä–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω"
   - –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è —Ñ–∏–Ω–∏—à–∞
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –°—Ç–∞—Ç—É—Å: "completed"
```

## üè≠ –≠—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –º–µ–±–µ–ª–∏

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å 13 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —ç—Ç–∞–ø–∞–º–∏:

| ‚Ññ | –≠—Ç–∞–ø | –¶–µ—Ö | –í—Ä–µ–º—è |
|---|------|-----|-------|
| 1 | –ü—Ä–∏—ë–º –∑–∞–∫–∞–∑–∞ | –û—Ñ–∏—Å | 15 –º–∏–Ω |
| 2 | –ó–∞–∫—É–ø–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ | –°–Ω–∞–±–∂–µ–Ω–∏–µ | 1 –¥–µ–Ω—å |
| 3 | –†–∞—Å–∫—Ä–æ–π | –¶–µ—Ö —Ä–∞—Å–∫—Ä–æ—è | 60 –º–∏–Ω |
| 4 | –ö—Ä–æ–º–ª–µ–Ω–∏–µ | –¶–µ—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ | 45 –º–∏–Ω |
| 5 | –°–≤–µ—Ä–ª–æ–≤–∫–∞ | –¶–µ—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ | 30 –º–∏–Ω |
| 6 | –§—Ä–µ–∑–µ—Ä–æ–≤–∫–∞ | –¶–µ—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ | 40 –º–∏–Ω |
| 7 | –®–ª–∏—Ñ–æ–≤–∫–∞ | –¶–µ—Ö –æ—Ç–¥–µ–ª–∫–∏ | 50 –º–∏–Ω |
| 8 | –ü–æ–∫—Ä–∞—Å–∫–∞/–õ–∞–∫–∏—Ä–æ–≤–∫–∞ | –¶–µ—Ö –ø–æ–∫—Ä–∞—Å–∫–∏ | 3 —á–∞—Å–∞ |
| 9 | –°—É—à–∫–∞ | –¶–µ—Ö –ø–æ–∫—Ä–∞—Å–∫–∏ | 8 —á–∞—Å–æ–≤ |
| 10 | –°–±–æ—Ä–∫–∞ | –¶–µ—Ö —Å–±–æ—Ä–∫–∏ | 90 –º–∏–Ω |
| 11 | –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ | –û–¢–ö | 20 –º–∏–Ω |
| 12 | –£–ø–∞–∫–æ–≤–∫–∞ | –°–∫–ª–∞–¥ | 30 –º–∏–Ω |
| 13 | –û—Ç–≥—Ä—É–∑–∫–∞ | –°–∫–ª–∞–¥ | 15 –º–∏–Ω |

**–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∏–º–µ–µ—Ç:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
- –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- –¶–µ—Ö/–æ—Ç–¥–µ–ª
- –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –¶–≤–µ—Ç –∏ –∏–∫–æ–Ω–∫—É –¥–ª—è UI

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1. production_stages (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —ç—Ç–∞–ø–æ–≤)
```sql
- id: "stage-001", "stage-002", ...
- name: "–†–∞—Å–∫—Ä–æ–π", "–ö—Ä–æ–º–ª–µ–Ω–∏–µ", ...
- sequence_order: 1, 2, 3, ... (–ø–æ—Ä—è–¥–æ–∫)
- color: "#3b82f6" (–¥–ª—è UI)
- department: "–¶–µ—Ö —Ä–∞—Å–∫—Ä–æ—è"
- estimated_duration: 60 (–º–∏–Ω—É—Ç)
```

### 2. stage_transitions (–∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤)
```sql
- id: UUID
- order_id: ID –∑–∞–∫–∞–∑–∞
- stage_id: ID —ç—Ç–∞–ø–∞
- status: 'started' | 'completed'
- operator_name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
- scan_time: "2025-11-06 18:30:00"
- duration_minutes: 45 (–¥–ª—è completed)
```

### 3. stage_scans (–¥–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–æ–≤)
```sql
- id: UUID
- transition_id: ID –ø–µ—Ä–µ—Ö–æ–¥–∞
- qr_code: "ORD-12345" –∏–ª–∏ "SKU-10000"
- scan_type: 'start' | 'finish'
- scanned_at: "2025-11-06 18:30:15"
- location: "–¶–µ—Ö ‚Ññ1"
```

## üîå API Endpoints

### GET /api/production/stages
**–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤**

```bash
curl https://labelcraft.sherhan1988hp.workers.dev/api/production/stages
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "stages": [
    {
      "id": "stage-003",
      "name": "–†–∞—Å–∫—Ä–æ–π",
      "sequence_order": 3,
      "color": "#3b82f6",
      "department": "–¶–µ—Ö —Ä–∞—Å–∫—Ä–æ—è",
      "estimated_duration": 60
    },
    ...
  ]
}
```

### POST /api/production/scan
**–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞ (—Å—Ç–∞—Ä—Ç/—Ñ–∏–Ω–∏—à —ç—Ç–∞–ø–∞)**

```bash
curl -X POST https://labelcraft.sherhan1988hp.workers.dev/api/production/scan \
  -H "Content-Type: application/json" \
  -d '{
    "qr_code": "ORD-12345",
    "stage_id": "stage-003",
    "operator_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "operator_id": "op-001",
    "location": "–¶–µ—Ö ‚Ññ1"
  }'
```

**–ü–µ—Ä–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (start):**
```json
{
  "success": true,
  "scan_type": "start",
  "message": "–≠—Ç–∞–ø '–†–∞—Å–∫—Ä–æ–π' –Ω–∞—á–∞—Ç",
  "transition": {
    "id": "trans-uuid",
    "status": "started",
    "scan_time": "2025-11-06 18:30:00"
  },
  "stage": {
    "name": "–†–∞—Å–∫—Ä–æ–π",
    "estimated_duration": 60
  }
}
```

**–í—Ç–æ—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (finish):**
```json
{
  "success": true,
  "scan_type": "finish",
  "message": "–≠—Ç–∞–ø '–†–∞—Å–∫—Ä–æ–π' –∑–∞–≤–µ—Ä—à—ë–Ω",
  "transition": {
    "id": "trans-uuid",
    "status": "completed",
    "duration_minutes": 45
  }
}
```

### GET /api/production/order/:orderId/history
**–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –∑–∞–∫–∞–∑–∞**

```bash
curl https://labelcraft.sherhan1988hp.workers.dev/api/production/order/order-123/history
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "history": [
    {
      "stage_name": "–†–∞—Å–∫—Ä–æ–π",
      "status": "completed",
      "operator_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
      "scan_time": "2025-11-06 18:30:00",
      "duration_minutes": 45,
      "sequence_order": 3
    },
    {
      "stage_name": "–ö—Ä–æ–º–ª–µ–Ω–∏–µ",
      "status": "started",
      "operator_name": "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞",
      "scan_time": "2025-11-06 19:15:00",
      "sequence_order": 4
    }
  ]
}
```

### GET /api/production/order/:orderId/current
**–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø –∑–∞–∫–∞–∑–∞**

```bash
curl https://labelcraft.sherhan1988hp.workers.dev/api/production/order/order-123/current
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "current": {
    "stage_name": "–ö—Ä–æ–º–ª–µ–Ω–∏–µ",
    "status": "started",
    "operator_name": "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞",
    "scan_time": "2025-11-06 19:15:00",
    "elapsed_minutes": 25,
    "estimated_duration": 45,
    "is_overdue": false
  }
}
```

### GET /api/production/dashboard
**–î–∞—à–±–æ—Ä–¥ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ (–≤—Å–µ –∑–∞–∫–∞–∑—ã + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)**

```bash
curl https://labelcraft.sherhan1988hp.workers.dev/api/production/dashboard
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "orders": [
    {
      "order_id": "order-123",
      "order_number": "ORD-12345",
      "customer_name": "–û–û–û –ú–µ–±–µ–ª—å",
      "stage_name": "–ö—Ä–æ–º–ª–µ–Ω–∏–µ",
      "stage_status": "started",
      "operator_name": "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞",
      "duration_minutes": 25
    }
  ],
  "stage_stats": [
    {
      "name": "–†–∞—Å–∫—Ä–æ–π",
      "in_progress": 3,
      "completed_today": 15,
      "avg_duration": 42.5
    }
  ]
}
```

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
```
[–í—ã–±—Ä–∞—Ç—å —ç—Ç–∞–ø] ‚Üí [–†–∞—Å–∫—Ä–æ–π ‚ñº]
[–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
|  –ó–∞–∫–∞–∑: ORD-12345     |
|  –ö–ª–∏–µ–Ω—Ç: –û–û–û –ú–µ–±–µ–ª—å   |
|  –≠—Ç–∞–ø: –†–∞—Å–∫—Ä–æ–π        |
|  –°—Ç–∞—Ç—É—Å: –ù–∞—á–∞—Ç        |
|  –í—Ä–µ–º—è: 00:25         |
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
[–ó–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–∞–ø]
```

### 2. Dashboard –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
```
–≠—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Å–µ–≥–æ–¥–Ω—è:

–†–∞—Å–∫—Ä–æ–π (3 –≤ —Ä–∞–±–æ—Ç–µ, 15 –∑–∞–≤–µ—Ä—à–µ–Ω–æ)
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë 42.5 –º–∏–Ω —Å—Ä–µ–¥–Ω.

–ö—Ä–æ–º–ª–µ–Ω–∏–µ (2 –≤ —Ä–∞–±–æ—Ç–µ, 12 –∑–∞–≤–µ—Ä—à–µ–Ω–æ)
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë 38.2 –º–∏–Ω —Å—Ä–µ–¥–Ω.

–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ORD-12345 ‚îÇ –ö—Ä–æ–º–ª–µ–Ω–∏–µ ‚îÇ 00:25  ‚îÇ
‚îÇ ORD-12346 ‚îÇ –†–∞—Å–∫—Ä–æ–π   ‚îÇ 01:15  ‚îÇ
‚îÇ ORD-12347 ‚îÇ –°–±–æ—Ä–∫–∞    ‚îÇ 00:45  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–∞—á–∞–ª–æ —ç—Ç–∞–ø–∞
```
1. –û–ø–µ—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —ç—Ç–∞–ø "–†–∞—Å–∫—Ä–æ–π"
2. –°–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∑–∞–∫–∞–∑–∞ "ORD-12345"
3. –°–∏—Å—Ç–µ–º–∞:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–µ—Ä–µ—Ö–æ–¥
   - –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "started"
   - –§–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–∫–∞–Ω —Å —Ç–∏–ø–æ–º "start"
4. –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç: "–†–∞—Å–∫—Ä–æ–π –Ω–∞—á–∞—Ç"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞
```
1. –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É
2. –°–∫–∞–Ω–∏—Ä—É–µ—Ç —Ç–æ—Ç –∂–µ QR "ORD-12345"
3. –°–∏—Å—Ç–µ–º–∞:
   - –ù–∞—Ö–æ–¥–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ (started)
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "completed"
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–∫–∞–Ω —Å —Ç–∏–ø–æ–º "finish"
4. –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç: "–†–∞—Å–∫—Ä–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω –∑–∞ 45 –º–∏–Ω"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
```
1. –ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à–∏–ª "–†–∞—Å–∫—Ä–æ–π"
2. –û–ø–µ—Ä–∞—Ç–æ—Ä –∫—Ä–æ–º–ª–µ–Ω–∏—è —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR
3. –°–∏—Å—Ç–µ–º–∞:
   - –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–ª—è "–ö—Ä–æ–º–ª–µ–Ω–∏–µ"
   - –ù–∞—á–∏–Ω–∞–µ—Ç –æ—Ç—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏
4. –ó–∞–∫–∞–∑ —Ç–µ–ø–µ—Ä—å –Ω–∞ —ç—Ç–∞–ø–µ "–ö—Ä–æ–º–ª–µ–Ω–∏–µ"
```

## üìà –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –†–∞—Å—á—ë—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```sql
-- –¢—Ä–∏–≥–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
duration = finish_time - start_time (–≤ –º–∏–Ω—É—Ç–∞—Ö)
```

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ activity_logs
```sql
-- –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
action_type: 'stage_started' | 'stage_completed'
target: order
metadata: {stage_name, operator, duration}
```

### 3. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ order_current_stage
```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
SELECT * FROM order_current_stage;
```

## üîç –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ:
1. **QR-–∫–æ–¥ –∑–∞–∫–∞–∑–∞** - –ø—Ä—è–º–æ–π –ø–æ–∏—Å–∫
2. **QR-–∫–æ–¥ —Ç–æ–≤–∞—Ä–∞** - –Ω–∞—Ö–æ–¥–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑ —Å —ç—Ç–∏–º —Ç–æ–≤–∞—Ä–æ–º
3. **–ê—Ä—Ç–∏–∫—É–ª (SKU)** - —á–µ—Ä–µ–∑ —Ç–æ–≤–∞—Ä –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞–∫–∞–∑

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —Å–∫–∞–Ω—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –≤—Ä–µ–º–µ–Ω–µ–º –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è
- ‚úÖ –°–≤—è–∑—å –∑–∞–∫–∞–∑ ‚Üí —ç—Ç–∞–ø ‚Üí –æ–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ IP –∞–¥—Ä–µ—Å–∞ –∏ –ª–æ–∫–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è

## üì± –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ —Ä–∞—Å–∫—Ä–æ—è

**–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã:**
```
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –í—ã–±—Ä–∞—Ç—å —ç—Ç–∞–ø "–†–∞—Å–∫—Ä–æ–π"
3. –í–∑—è—Ç—å –∑–∞–∫–∞–∑ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
4. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR –∑–∞–∫–∞–∑–∞
5. –£–≤–∏–¥–µ—Ç—å: "–†–∞—Å–∫—Ä–æ–π –Ω–∞—á–∞—Ç"
6. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å–∫—Ä–æ–π –¥–µ—Ç–∞–ª–µ–π
```

**–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:**
```
7. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR —Å–Ω–æ–≤–∞
8. –£–≤–∏–¥–µ—Ç—å: "–†–∞—Å–∫—Ä–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω –∑–∞ 45 –º–∏–Ω"
9. –ü–µ—Ä–µ–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ –∫—Ä–æ–º–ª–µ–Ω–∏–µ
```

### –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```
1. –û—Ç–∫—Ä—ã—Ç—å dashboard
2. –í–∏–¥–µ—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã
3. –í–∏–¥–µ—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
4. –í–∏–¥–µ—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ (–∫—Ä–∞—Å–Ω—ã–º –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω estimated_duration)
5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç –∑–∞ –¥–µ–Ω—å
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ (`008_production_stages.sql`)
2. ‚úÖ API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (worker/index.js)
3. ‚è≥ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ë–î
4. ‚è≥ –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
5. ‚è≥ –°–æ–∑–¥–∞—Ç—å dashboard –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
6. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–∫–∞–∑–∞–º–∏
7. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π

## üìö –§–∞–π–ª—ã

- `migrations/008_production_stages.sql` - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- `worker/index.js` - API endpoints (—Ñ—É–Ω–∫—Ü–∏—è handleProductionStages)
- `docs/PRODUCTION_STAGES_2025-11-06.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

## ‚ùì FAQ

**Q: –ß—Ç–æ –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–±—ã–ª –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∏—à?**  
A: –≠—Ç–∞–ø –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "started". –ú–µ–Ω–µ–¥–∂–µ—Ä —É–≤–∏–¥–∏—Ç —ç—Ç–æ –≤ dashboard –∫–∞–∫ –∑–∞–¥–µ—Ä–∂–∫—É.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–∞–ø?**  
A: –î–∞, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –ª—é–±–æ–≥–æ —ç—Ç–∞–ø–∞.

**Q: –ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –æ—à–∏–±–æ—á–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ?**  
A: –ß–µ—Ä–µ–∑ API –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞).

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–∫–∞–∑–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?**  
A: –î–∞, –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

**Q: –ö–∞–∫ —É–∑–Ω–∞—Ç—å –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–ª –Ω–∞–¥ –∑–∞–∫–∞–∑–æ–º?**  
A: GET /api/production/order/:id/history –ø–æ–∫–∞–∂–µ—Ç –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º.
