# Руководство: Администрирование аккаунтов и смена пароля

Этот документ описывает, как администратору управлять учётными записями пользователей, а также как любому пользователю самостоятельно сменить пароль в приложении.

## Доступ к разделам

- Администраторам доступна страница «Админ-панель → Пользователи» (маршрут: `/admin/users`).
- Для всех авторизованных пользователей доступен диалог «Смена пароля» из навигации приложения.

## Управление пользователями (для администратора)

На странице «Админ-панель → Пользователи» доступны следующие действия:

1) Просмотр и поиск
- Список всех пользователей с возможностью поиска по имени пользователя.
- Текущий пользователь подсвечен в списке (для удобства).

2) Создание пользователя
- Укажите уникальное имя пользователя (регистронезависимая проверка) — дубликаты запрещены.
- Выберите роль и сегмент.
- Задайте начальный пароль (должен соответствовать минимальным требованиям; см. подсказки формы).

3) Редактирование пользователя
- Можно изменить имя пользователя (с учётом уникальности), роль и сегмент.
- Нельзя понизить или удалить последнего активного администратора — в системе всегда должен оставаться минимум один администратор.

4) Сброс пароля
- Доступно действие «Сбросить пароль» для выбранного пользователя — задаёт новый пароль, который пользователь должен использовать при следующем входе.

5) Удаление пользователя
- Удаление недоступно для «самого себя» через UI, чтобы предотвратить случайную потерю доступа.
- Нельзя удалить последнего администратора (будет показана ошибка).

## Смена пароля для себя (для всех пользователей)

- Откройте диалог «Смена пароля» из меню навигации.
- Укажите текущий пароль, новый пароль и подтверждение нового пароля.
- Требования к паролю (минимальная длина и т.п.) подсвечиваются непосредственно в форме.
- При успешной смене пароля вы увидите уведомление об успехе.

## Правила и валидации

- Имя пользователя должно быть уникальным (сравнение без учёта регистра).
- Пароль должен соответствовать минимальным требованиям безопасности (подсказки видны в UI формы).
- Ограничение «последний администратор»: система не позволит удалить или понизить роль единственного оставшегося администратора.
- Роли и сегменты должны быть выбраны из списка допустимых значений.

## Подсказки и поведение

- Авторизация сохраняется локально, поэтому после перезапуска вкладки вы останетесь в системе (до явного выхода).
- Изменения администратора синхронизируются между вкладками/окнами — список пользователей и текущая сессия обновятся автоматически.
- При удалении пользователя, который сейчас авторизован, его сессия будет завершена.

## Заметки по безопасности

Эта реализация предназначена для локального/демонстрационного использования и хранит данные пользователей в браузере (localStorage). Для продакшена требуется серверная аутентификация, безопасное хранение паролей и полноценная система управления пользователями.

---

Если что-то не работает как ожидается или вы видите сообщения об ошибках при операциях (создание, изменение, удаление, сброс пароля) — ориентируйтесь на текст ошибки в UI: он соответствует правилам и ограничениям, перечисленным выше.
