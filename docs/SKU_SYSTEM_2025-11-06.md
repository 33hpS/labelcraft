# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Ä—Ç–∏–∫—É–ª–æ–≤ (SKU) –∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã—Ö QR-–∫–æ–¥–æ–≤

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ (SKU) –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º–∏ QR-–∫–æ–¥–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ä—Ç–∏–∫—É–ª–æ–≤.

**–î–∞—Ç–∞:** 6 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v2.2  
**Worker Version:** a223e357-0393-45ea-b14e-9a747a4fa397

## ‚ú® –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
–¢–æ–≤–∞—Ä: "–¢—É–º–±–∞ –ù–∏–µ—Ä—Å–∏ 600 –º–º –ì–ª–æ—Ä–∏—è"
SKU: null –∏–ª–∏ –¥—É–±–ª–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ
QR-–∫–æ–¥: AUTO-1761137513229-c3cbf8db (–¥–ª–∏–Ω–Ω—ã–π, 33 —Å–∏–º–≤–æ–ª–∞)
```

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
–¢–æ–≤–∞—Ä: "–¢—É–º–±–∞ –ù–∏–µ—Ä—Å–∏ 600 –º–º –ì–ª–æ—Ä–∏—è"
SKU: SKU-10000 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–æ–µ–Ω)
QR-–∫–æ–¥: SKU-10000 (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, 9 —Å–∏–º–≤–æ–ª–æ–≤)
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ QR-–∫–æ–¥—ã
- ‚úÖ **–†–∞–∑–º–µ—Ä:** 9 —Å–∏–º–≤–æ–ª–æ–≤ –≤–º–µ—Å—Ç–æ 33 (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 73%)
- ‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏ –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏ ("SKU-10000")
- ‚úÖ **–ü–µ—á–∞—Ç—å:** –ú–µ–Ω—å—à–∏–π QR-–∫–æ–¥ = –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞ –Ω–∞ —ç—Ç–∏–∫–µ—Ç–∫–µ
- ‚úÖ **–í–≤–æ–¥:** –ú–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ –ö–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞—Ä—Ç–∏–∫—É–ª
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è (SKU-10000, SKU-10001, ...)
- ‚úÖ –°—á—ë—Ç—á–∏–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î (–Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è)
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã (–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)

### 3. –°–≤—è–∑—å SKU –∏ QR-–∫–æ–¥–∞
- ‚úÖ QR-–∫–æ–¥ = –∞—Ä—Ç–∏–∫—É–ª (–ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- ‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ç–∏–∫—É–ª–∞ = –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∞—Ä—Ç–∏–∫—É–ª–æ–≤ (sku_change_history)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`007_auto_sku_system.sql`)

**–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

#### auto_sku_counter
```sql
CREATE TABLE auto_sku_counter (
  id INTEGER PRIMARY KEY,          -- –í—Å–µ–≥–¥–∞ 1 (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
  current_value INTEGER,           -- –°–ª–µ–¥—É—é—â–∏–π –Ω–æ–º–µ—Ä SKU
  prefix TEXT DEFAULT 'SKU',       -- –ü—Ä–µ—Ñ–∏–∫—Å –∞—Ä—Ç–∏–∫—É–ª–∞
  updated_at TEXT                  -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
);
```

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```
id: 1
current_value: 10045
prefix: SKU
```

#### sku_change_history
```sql
CREATE TABLE sku_change_history (
  id TEXT PRIMARY KEY,
  product_id TEXT,                 -- ID —Ç–æ–≤–∞—Ä–∞
  old_sku TEXT,                    -- –°—Ç–∞—Ä—ã–π –∞—Ä—Ç–∏–∫—É–ª
  new_sku TEXT,                    -- –ù–æ–≤—ã–π –∞—Ä—Ç–∏–∫—É–ª
  old_qr_code TEXT,                -- –°—Ç–∞—Ä—ã–π QR-–∫–æ–¥
  new_qr_code TEXT,                -- –ù–æ–≤—ã–π QR-–∫–æ–¥
  changed_by TEXT,                 -- –ö—Ç–æ –∏–∑–º–µ–Ω–∏–ª
  changed_at TEXT,                 -- –ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏–ª
  reason TEXT                      -- –ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
);
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–ú–∏–≥—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–∏–ª–∞ 45 —Ç–æ–≤–∞—Ä–æ–≤:**
- –ü—Ä–∏—Å–≤–æ–∏–ª–∞ –∞—Ä—Ç–∏–∫—É–ª—ã: `SKU-10000` –¥–æ `SKU-10044`
- –ó–∞–º–µ–Ω–∏–ª–∞ –¥–ª–∏–Ω–Ω—ã–µ QR-–∫–æ–¥—ã –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ
- –û–±–Ω–æ–≤–∏–ª–∞ —Å—á—ë—Ç—á–∏–∫ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (10045)

**SQL-–∑–∞–ø—Ä–æ—Å:**
```sql
WITH numbered_products AS (
  SELECT id, ROW_NUMBER() OVER (ORDER BY created_at) as row_num
  FROM products
  WHERE sku IS NULL OR sku = '' OR sku = name
)
UPDATE products 
SET sku = 'SKU-' || printf('%05d', 10000 + row_num - 1),
    qr_code = sku
WHERE id IN (SELECT id FROM numbered_products);
```

### 3. Worker API Functions

#### generateAutoSKU(DB)
```javascript
// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∞—Ä—Ç–∏–∫—É–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// –ü—Ä–∏–º–µ—Ä: SKU-10045, SKU-10046, ...

const sku = await generateAutoSKU(DB);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: "SKU-10045"
// –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫: 10045 ‚Üí 10046
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ß–∏—Ç–∞–µ—Ç `current_value` –∏–∑ `auto_sku_counter`
2. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç: `prefix + '-' + padded_number`
3. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å—á—ë—Ç—á–∏–∫ –∞—Ç–æ–º–∞—Ä–Ω–æ
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π SKU

#### logSKUChange(DB, productId, oldSKU, newSKU, ...)
```javascript
// –õ–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞—Ä—Ç–∏–∫—É–ª–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é
await logSKUChange(
  DB, 
  productId, 
  'SKU-10000', 
  'SKU-10001', 
  'SKU-10000', 
  'SKU-10001',
  '–ê–¥–º–∏–Ω',
  'Manual update'
);
```

### 4. API Endpoints

#### POST /api/products
**–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –∞–≤—Ç–æ–∞—Ä—Ç–∏–∫—É–ª–æ–º:**

```javascript
// –ó–∞–ø—Ä–æ—Å (–±–µ–∑ SKU)
{
  "name": "–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä",
  "weight": 1.5,
  "volume": 0.5
}

// –û—Ç–≤–µ—Ç
{
  "id": "uuid-generated",
  "name": "–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä",
  "sku": "SKU-10045",        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–æ–µ–Ω
  "qr_code": "SKU-10045",    // –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π QR
  "weight": 1.5,
  "volume": 0.5,
  "created_at": "2025-11-06 12:30:00"
}
```

**–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å–æ —Å–≤–æ–∏–º SKU:**

```javascript
// –ó–∞–ø—Ä–æ—Å (—Å –∫–∞—Å—Ç–æ–º–Ω—ã–º SKU)
{
  "name": "–¢–æ–≤–∞—Ä —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –∞—Ä—Ç–∏–∫—É–ª–æ–º",
  "sku": "CUSTOM-123",
  "weight": 2.0,
  "volume": 1.0
}

// –û—Ç–≤–µ—Ç
{
  "id": "uuid-generated",
  "name": "–¢–æ–≤–∞—Ä —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –∞—Ä—Ç–∏–∫—É–ª–æ–º",
  "sku": "CUSTOM-123",       // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —É–∫–∞–∑–∞–Ω–Ω—ã–π
  "qr_code": "CUSTOM-123",   // QR = SKU
  "weight": 2.0,
  "volume": 1.0
}
```

#### PUT /api/products/:id
**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è SKU:**

```javascript
// –ï—Å–ª–∏ SKU –∏–∑–º–µ–Ω–∏–ª—Å—è, —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ sku_change_history
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è qr_code = –Ω–æ–≤—ã–π SKU
```

### 5. Frontend UI

#### ProductModal.tsx
**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞—Ä—Ç–∏–∫—É–ª–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:**

```tsx
{product?.sku && (
  <div className="space-y-2">
    <label>–ê—Ä—Ç–∏–∫—É–ª (SKU)</label>
    <Input value={product.sku} disabled className="bg-muted" />
    <p className="text-xs text-muted-foreground">
      –ê—Ä—Ç–∏–∫—É–ª –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ —Å–≤—è–∑–∞–Ω —Å QR-–∫–æ–¥–æ–º
    </p>
  </div>
)}
```

#### Operator.tsx
**–ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```tsx
// –ü–æ–∏—Å–∫ –ø–æ SKU (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #3)
product = products.find(p => p.sku?.toLowerCase() === searchText.toLowerCase());
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

```sql
-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
Total products:        45
Auto-generated SKU:    45
Compact QR codes:      45
Next SKU number:       10045
Database size:         0.60 MB
Rows updated:          372
Queries executed:      11
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—á—ë—Ç—á–∏–∫
npx wrangler d1 execute productlabelerpro --remote \
  --command="SELECT * FROM auto_sku_counter"

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# id=1, current_value=10045, prefix=SKU
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–µ 5 —Ç–æ–≤–∞—Ä–æ–≤
curl "https://labelcraft.sherhan1988hp.workers.dev/api/products?limit=5"

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤—Å–µ –∏–º–µ—é—Ç SKU-XXXXX –∏ qr_code = sku
```

### 3. –ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É
```bash
# –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –ø–æ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º—É QR (SKU)
curl "https://labelcraft.sherhan1988hp.workers.dev/api/products?search=SKU-10000"

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä "–¢—É–º–±–∞ –ù–∏–µ—Ä—Å–∏ 600 –º–º –ì–ª–æ—Ä–∏—è"
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
```javascript
// –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
// 1. –û—Ç–∫—Ä—ã—Ç—å /products
// 2. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"
// 3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–µ—Å, –æ–±—ä—ë–º
// 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

// –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–≤–∞—Ä –ø–æ–ª—É—á–∏—Ç SKU-10045 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 5. –¢–µ—Å—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
npm run test:run

# –†–µ–∑—É–ª—å—Ç–∞—Ç: 20/20 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ ‚úÖ
```

## üì± –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

**–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ QR-–∫–æ–¥–∞:**
```
1. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ "SKU-10000"
2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥—ë—Ç —Ç–æ–≤–∞—Ä –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É
3. –¢–æ–≤–∞—Ä –≥–æ—Ç–æ–≤ –∫ –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–∫–∏
```

**–†—É—á–Ω–æ–π –≤–≤–æ–¥ –∞—Ä—Ç–∏–∫—É–ª–∞:**
```
1. –í–≤–µ—Å—Ç–∏ –≤ –ø–æ–ª–µ: SKU-10000
2. –ù–∞–∂–∞—Ç—å Enter
3. –¢–æ–≤–∞—Ä –Ω–∞–π–¥–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:**
```
1. –û—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–¥–µ–ª "–¢–æ–≤–∞—Ä—ã"
2. –ù–∞–∂–∞—Ç—å "+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–µ—Å, –æ–±—ä—ë–º
4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–æ–∏—Ç:
   - –ê—Ä—Ç–∏–∫—É–ª: SKU-10045
   - QR-–∫–æ–¥: SKU-10045
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ç–∏–∫—É–ª–∞:**
```
1. –û—Ç–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ê—Ä—Ç–∏–∫—É–ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö—É (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
3. QR-–∫–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∞—Ä—Ç–∏–∫—É–ª–æ–º
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
```javascript
// –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ –≤ SQL
UPDATE auto_sku_counter 
SET current_value = current_value + 1 
WHERE id = 1

// –ì–∞—Ä–∞–Ω—Ç–∏—è: –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –ø–æ–ª—É—á–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π SKU
```

### –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∞—Ä—Ç–∏–∫—É–ª–æ–≤
```sql
-- –ò–Ω–¥–µ–∫—Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
CREATE UNIQUE INDEX idx_products_sku_lookup 
ON products(sku) WHERE sku IS NOT NULL;

-- –ò–Ω–¥–µ–∫—Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å QR
CREATE UNIQUE INDEX idx_products_qr_code_unique 
ON products(qr_code) WHERE qr_code IS NOT NULL;
```

### –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
```sql
-- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
SELECT * FROM sku_change_history 
WHERE product_id = 'uuid'
ORDER BY changed_at DESC;

-- –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∞—Ä—Ç–∏–∫—É–ª—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–∞–∑–º–µ—Ä QR-–∫–æ–¥–æ–≤
| –§–æ—Ä–º–∞—Ç | –î–ª–∏–Ω–∞ | –ü—Ä–∏–º–µ—Ä | QR —Ä–∞–∑–º–µ—Ä |
|--------|-------|--------|-----------|
| –°—Ç–∞—Ä—ã–π | 33 —Å–∏–º–≤–æ–ª–∞ | AUTO-1761137513229-c3cbf8db | 29x29 px |
| –ù–æ–≤—ã–π | 9 —Å–∏–º–≤–æ–ª–æ–≤ | SKU-10000 | 21x21 px |
| **–≠–∫–æ–Ω–æ–º–∏—è** | **-73%** | | **-28%** |

### –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞
```sql
-- –ü–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É SKU: O(log n)
SELECT * FROM products WHERE sku = 'SKU-10000';

-- –ò–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
```

## üöÄ –î–µ–ø–ª–æ–π

**–í–µ—Ä—Å–∏—è:** a223e357-0393-45ea-b14e-9a747a4fa397  
**URL:** https://labelcraft.sherhan1988hp.workers.dev  
**–î–∞—Ç–∞:** 6 –Ω–æ—è–±—Ä—è 2025, 18:25  

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ 45 —Ç–æ–≤–∞—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ Worker –∑–∞–¥–µ–ø–ª–æ–µ–Ω
- ‚úÖ API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (20/20)

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ú–∏–≥—Ä–∞—Ü–∏–∏
- `migrations/007_auto_sku_system.sql` - –û—Å–Ω–æ–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### Worker
- `worker/index.js` - –§—É–Ω–∫—Ü–∏–∏ generateAutoSKU, logSKUChange

### Frontend
- `src/components/ProductModal.tsx` - UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è SKU
- `src/pages/Operator.tsx` - –ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/SKU_SYSTEM_2025-11-06.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- `docs/CHANGELOG.md` - –û–±–Ω–æ–≤–ª—ë–Ω —Å –∑–∞–ø–∏—Å—å—é v2.2

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã** - –†–∞–∑–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (FURN-, MIRROR-, ...)
2. **–ü–∞–∫–µ—Ç–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ** - –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞—Ä—Ç–∏–∫—É–ª–æ–≤
3. **–ò–º–ø–æ—Ä—Ç —Å–æ —Å–≤–æ–∏–º–∏ SKU** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –∏–∑ –ú–æ–π–°–∫–ª–∞–¥
4. **–®—Ç—Ä–∏—Ö–∫–æ–¥—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ SKU** - EAN-13 –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –∞—Ä—Ç–∏–∫—É–ª–∞
5. **API endpoint –¥–ª—è —Å—á—ë—Ç—á–∏–∫–∞** - GET /api/sku-counter

## ‚ùì FAQ

**Q: –ß—Ç–æ –µ—Å–ª–∏ —è —Ö–æ—á—É —Å–≤–æ–π –∞—Ä—Ç–∏–∫—É–ª?**  
A: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–µ `sku` - —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –≤–º–µ—Å—Ç–æ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∞—Ä—Ç–∏–∫—É–ª?**  
A: –î–∞, —á–µ—Ä–µ–∑ API PUT /api/products/:id. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ `sku_change_history`.

**Q: –ß—Ç–æ –µ—Å–ª–∏ —Å—á—ë—Ç—á–∏–∫ —Å–±—Ä–æ—Å–∏—Ç—Å—è?**  
A: –°—á—ë—Ç—á–∏–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ. –°–±—Ä–æ—Å –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.

**Q: –ö–∞–∫ –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä —Å –∞—Ä—Ç–∏–∫—É–ª–æ–º SKU-10000?**  
A: –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR "SKU-10000" –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –≤ –ø–æ–∏—Å–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.

**Q: QR-–∫–æ–¥ –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω –∞—Ä—Ç–∏–∫—É–ª—É?**  
A: –î–∞, –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–∏–∫—É–ª–æ–≤. –î–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ.

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–∞ –≤ production. –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–ª—É—á–∏–ª–∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∞—Ä—Ç–∏–∫—É–ª—ã –∏ QR-–∫–æ–¥—ã. –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–π –Ω–æ–º–µ—Ä –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ QR-–∫–æ–¥—ã (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 73%)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä—Ç–∏–∫—É–ª–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è SKU –∏ QR
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∞—Ä—Ç–∏–∫—É–ª–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞—Ä—Ç–∏–∫—É–ª—ã
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** v2.2  
**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 6 –Ω–æ—è–±—Ä—è 2025
